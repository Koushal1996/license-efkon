<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <h2 class="text-center">Product Detail Table</h2>
      <!-- <div class="text-center">
        <div *ngIf="isloader" class="spinner-border text-danger" style="width: 6rem; height: 6rem;"></div>
      </div> -->
      <!-- <div class="table-responsive"> -->
        <table class="table table-bordered mt-4">
          <thead  class="users_table_hader">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Product Family</th>
              <th scope="col">Product Code</th>
              <th scope="col">Version</th>
              <th scope="col" class="action_width" *ngIf="hasAuthority('PRODUCT_DETAIL_UPDATE') || hasAuthority('PRODUCT_DETAIL_DELETE')">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let detail of productDetail; index as i">
              <td>{{i+1}}</td>
              <td> {{detail.productFamilyName}}</td>
              <td>{{detail.productCodeName}}</td>
              <td>{{detail.versionName}}</td>
              <td *ngIf="hasAuthority('PRODUCT_DETAIL_UPDATE') || hasAuthority('PRODUCT_DETAIL_DELETE')">
                <button class="edit_button"
                 *ngIf="hasAuthority('PRODUCT_DETAIL_UPDATE')"
                (click)="editProductDetail(detail)">
                  <i class="fa fa-edit"></i>
                </button>
                <button class="delete_button" 
                *ngIf="hasAuthority('PRODUCT_DETAIL_DELETE')"
                (click)="deleteProductDetail(detail)">
                  <i class="fa fa-trash"></i>
                </button>
              </td>

            </tr>
          </tbody>
        </table>
      <!-- </div> -->
      <ng-container *ngIf="hasAuthority('PRODUCT_DETAIL_CREATE')" >
      <button class="btn btn-success mb-3 mt-1"  *ngIf="!isCreateDetail"
      (click)="showDetailForm()">Add Product Detail </button>
      </ng-container>
    </div>
    
    <div class="" *ngIf="isCreateDetail">
      <div class="popup_main">
        <div class="form_main">
          <div class="popup_header">
           <h2 class="text-center">Product Detail</h2>
           <button type="button" class="close_btn"
             (click)="close()"><i class="fa fa-times" aria-hidden="true"></i></button>
          </div>
         <form (ngSubmit)="onSubmit()" [formGroup]="createDetailForm">
           <div class="input_feild">
           <div class="form-group">
             <label>Product Family</label>
             <select class="form-control" (ngModelChange)="onchange($event)" formControlName="productFamilyId">
               <option value={{name.id}} *ngFor="let name of Family">{{name.name}}</option>
             </select>
             <span *ngIf="createDetailForm.get('productFamilyId').errors &&
   (createDetailForm.get('productFamilyId').touched||createDetailForm.get('productFamilyId').dirty)">
   <span *ngIf="createDetailForm.get('productFamilyId').errors.required" class="field_error">project Family is
     required</span>
   </span>
           </div>
   
           <div class="form-group">
             <label>Product Code </label>
             <select class="form-control" formControlName="productCodeId">
               <option *ngFor="let productCode of productCodes" value="{{productCode.id}}">
                 {{productCode.name}}
               </option>
             </select>
             <span *ngIf="createDetailForm.get('productCodeId').errors &&
             (createDetailForm.get('productCodeId').touched||createDetailForm.get('productCodeId').dirty)">
             <span *ngIf="createDetailForm.get('productCodeId').errors.required" class="field_error">project Code is
               required</span>
             </span>
           </div>
   
           <div class="form-group">
             <label>Version</label>
             <select class="form-control" formControlName="versionId">
               <option *ngFor="let name of Versions" value={{name.id}}>
                 {{name.version}}
               </option>
             </select>
             <span *ngIf="createDetailForm.get('versionId').errors &&
             (createDetailForm.get('versionId').touched||createDetailForm.get('versionId').dirty)">
             <span *ngIf="createDetailForm.get('versionId').errors.required" class="field_error">Version  is
               required</span>
             </span>
           </div>
           
             </div>
         </form>
         <div class="modal_footer">
          <button type="submit" class="btn btn-success ml-auto float-right" *ngIf="!loaderbutton"
           [disabled]="!createDetailForm.valid">
            {{detailId ?'Update': 'Submit'}} </button>
            <button class="buttonload btn-danger ml-auto" *ngIf="loaderbutton">
              <i class="fa fa-refresh fa-spin"></i> Loading
            </button>
            <!-- <button type="button" class="btn btn-danger ml-2"
            (click)="Reset()" >
            <i class="fa fa-times"></i> Reset</button> -->
          </div>
         </div>
      </div>
    </div>

  </div>
</div>
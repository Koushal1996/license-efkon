<div class="container-fluid mt-5">
  <div class="row">
    <div class="col-md-6">
      <h2 class="text-center">Product Detail Table</h2>
      <div class="text-center">
        <div *ngIf="isloader" class="spinner-border text-danger" style="width: 6rem; height: 6rem;"></div>
      </div>
      <div class="table-responsive">
        <table class="table table-bordered mt-4">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Product Family</th>
              <th scope="col">Product Code</th>
              <th scope="col">Version</th>
              <th scope="col" *ngIf="hasAuthority('PRODUCT_DETAIL_UPDATE') || hasAuthority('PRODUCT_DETAIL_DELETE')">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let detail of productDetail; index as i">
              <td>{{i+1}}</td>
              <td> {{detail.productFamilyName}}</td>
              <td>{{detail.productCodeName}}</td>
              <td>{{detail.versionName}}</td>
              <td *ngIf="hasAuthority('PRODUCT_DETAIL_UPDATE') || hasAuthority('PRODUCT_DETAIL_DELETE')">
                <a class="text-primary pr-2 cursor"
                 *ngIf="hasAuthority('PRODUCT_DETAIL_UPDATE')"
                (click)="editProductDetail(detail)">
                  <i class="fa fa-edit"></i>
                </a>
                <a class="text-danger pl-2 cursor" 
                *ngIf="hasAuthority('PRODUCT_DETAIL_DELETE')"
                (click)="deleteProductDetail(detail)">
                  <i class="fa fa-trash"></i>
                </a>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
      <ng-container *ngIf="hasAuthority('PRODUCT_DETAIL_CREATE')" >
      <button class="btn btn-danger"  *ngIf="!isCreateDetail"
      (click)="showDetailForm()">Add Product Detail </button>
      </ng-container>
    </div>
    <div class="col-md-6" *ngIf="isCreateDetail">
      <h2 class="text-center">Product Detail</h2>
      <form (ngSubmit)="onSubmit()" [formGroup]="createDetailForm">
        <div class="form-group">
          <label>Product Family</label>
          <select class="form-control" (ngModelChange)="onchange($event)" formControlName="productFamilyId">
            <option value={{name.id}} *ngFor="let name of Family">{{name.name}}</option>
          </select>
          <span *ngIf="createDetailForm.get('productFamilyId').errors &&
(createDetailForm.get('productFamilyId').touched||createDetailForm.get('productFamilyId').dirty)">
<span *ngIf="createDetailForm.get('productFamilyId').errors.required" class="text-danger">project Family is
  required</span>
</span>
        </div>

        <div class="form-group">
          <label>Product Code </label>
          <select class="form-control" formControlName="productCodeId">
            <option *ngFor="let productCode of productCodes" value="{{productCode.id}}">
              {{productCode.name}}
            </option>
          </select>
          <span *ngIf="createDetailForm.get('productCodeId').errors &&
          (createDetailForm.get('productCodeId').touched||createDetailForm.get('productCodeId').dirty)">
          <span *ngIf="createDetailForm.get('productCodeId').errors.required" class="text-danger">project Code is
            required</span>
          </span>
        </div>

        <div class="form-group">
          <label>Version</label>
          <select class="form-control" formControlName="versionId">
            <option *ngFor="let name of Versions" value={{name.id}}>
              {{name.version}}
            </option>
          </select>
          <span *ngIf="createDetailForm.get('versionId').errors &&
          (createDetailForm.get('versionId').touched||createDetailForm.get('versionId').dirty)">
          <span *ngIf="createDetailForm.get('versionId').errors.required" class="text-danger">Version  is
            required</span>
          </span>
        </div>
        <button type="submit" class="btn btn-danger ml-auto" *ngIf="!loaderbutton"
         [disabled]="!createDetailForm.valid">
          {{detailId ?'Update': 'Submit'}} </button>
          <button class="buttonload btn-danger ml-auto" *ngIf="loaderbutton">
            <i class="fa fa-refresh fa-spin"></i> Loading
          </button>
          <button type="button" class="btn btn-danger ml-2"
          (click)="Reset()" >
          <i class="fa fa-times"></i> Reset</button>
          <button type="button" class="btn btn-danger ml-2"
          (click)="close()"> Close</button>
      </form>
    </div>

  </div>
</div>